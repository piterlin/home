<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8>
    <meta name="apple-mobile-web-app-capable" content="yes" /><!-- home screen app 全屏 -->
    <meta name="apple-mobile-web-app-status-bar-style" content="black" /><!-- 状态栏 -->
<title>jd3x4</title>
<style>
    body {
        color: #31708f !important;
    }
    canvas {
        width: 100%;
        height: 100%;
        padding: 0;
        margin: 0
    }
    .nopadding {
        padding: 0 !important;
        margin: 0 !important;
    }
</style>

<script src="js/three.min.js"></script>
<script src="js/stats.min.js"></script>
<script src="js/OBJLoader.js"></script>
<script src="js/MTLLoader.js"></script>
    <script src="js/StereoEffect.js"></script>

    <script src="js/DeviceOrientationControls.js"></script>

<script type="text/javascript" src='js/jquery-1.12.3.min.js'></script>

<script>

var m_effect


var m_mcontrols
  /*
   *主显区的长宽
   * */
var m_main_view_width, m_main_view_height;

var m_container, m_camera, m_scene, m_renderer;

/**
 * 初始化显区尺寸
 */

function updateSize() {
  m_main_view_width = window.innerWidth;
  m_main_view_height = window.innerHeight;
}
function init3D() {
  updateSize();
  // m_container = $("#3d_content");
  m_container = document.createElement('div');
  document.body.appendChild(m_container);
  m_camera = new THREE.PerspectiveCamera(75, m_main_view_width /m_main_view_height, 1, 1100);
  m_scene = new THREE.Scene();
  m_renderer = new THREE.WebGLRenderer({});
  m_renderer.setPixelRatio(window.devicePixelRatio);
  m_renderer.setSize(m_main_view_width, m_main_view_height);
  m_container.appendChild(m_renderer.domElement);
  window.addEventListener('resize', onWindowResize, false);
}

/**
 * 窗口尺寸变化处理器
 * */
function onWindowResize() {
  updateSize();
  m_camera.aspect = window.innerWidth / window.innerHeight;
  m_camera.updateProjectionMatrix();
  m_effect.setSize(window.innerWidth, window.innerHeight);
}


$(document).ready(function () {
   init3D();
    m_effect= new THREE.StereoEffect( m_renderer );
    m_effect.setSize( window.innerWidth, window.innerHeight )
    m_mcontrols = new THREE.DeviceOrientationControls( m_camera );
   initSky();
   animate();
});



function animate() {
    requestAnimationFrame(animate);
    update();
}

function update() {
    m_effect.render( m_scene, m_camera );
    m_mcontrols.update();
}
function initSky(){
    var r3 = "texture/big_pic/";
    var urls3 = [
        r3 + "2048_RT.png", r3 + "2048_LF.png",
        r3 + "2048_UP.png", r3 + "2048_DN.png",
        r3 + "2048_BK.png", r3 + "2048_RF.png"
    ];
    var skytexture3=loadSkyTexture( urls3);
    skytexture3.jd_name="jd3";
    m_skybox.push(skytexture3);
    m_scene.add(buildSkyBox(skytexture3))

}

function loadSkyTexture(urls) {
  return new THREE.CubeTextureLoader().load(urls);
}

</script>
</head>
<body style="padding: 0;">

</body>
</html>
